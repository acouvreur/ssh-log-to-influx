version: "3.7"

services:
  ssh-log-to-influx:
    image: acouvreur/ssh-log-to-influx
    build: ./
    restart: always
    environment:
      - INFLUX_URL=influxdb
      - INFLUX_DB=telegraf
      - NODE_TLS_REJECT_UNAUTHORIZED=0
      - INFLUX_PROTOCOL=https
      - INFLUX_USER=$INFLUX_USER
      - INFLUX_PWD=$INFLUX_PWD
      - DEBUG_LEVEL=debug
    networks: 
      - traefik
    ports:
      - 7070:7070/tcp

networks:
  traefik:
    external: true
    name: traefik
